<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Bacon Labs">
  <link rel="canonical" href="https://88mph.app/docs/smartcontract/">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Smart contract reference - 88mph Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Smart contract reference";
    var mkdocs_page_input_path = "smartcontract.md";
    var mkdocs_page_url = "/docs/smartcontract/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> 88mph Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../howitworks/">How 88mph works</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../mph/">MPH tokenomics</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../addresses/">Smart contract addresses</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Smart contract reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#architecture-overview">Architecture overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#api-reference">API reference</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#dinterest">DInterest</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#state-changing-functions">State changing functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#read-only-functions">Read only functions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#feemodel">FeeModel</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#read-only-functions_1">Read only functions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#moneymarket">MoneyMarket</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#state-changing-functions_1">State changing functions</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#read-only-functions_2">Read only functions</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">88mph Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Smart contract reference</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/88mphapp/docs/edit/master/docs/smartcontract.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="smart-contract-reference">Smart contract reference<a class="headerlink" href="#smart-contract-reference" title="Permanent link">#</a></h1>
<p>The smart contract source code can be found on <a href="https://github.com/88mphapp/88mph-contracts">GitHub</a>.</p>
<h2 id="architecture-overview">Architecture overview<a class="headerlink" href="#architecture-overview" title="Permanent link">#</a></h2>
<p>Each 88mph pool consists of 6 smart contracts:</p>
<ul>
<li><code>DInterest</code>: The main smart contract that users interact with. Handles depositing, withdrawing, and keeping track of deposits. Emits all of the events used in the subgraph.</li>
<li><code>FeeModel</code>: Determines the fee strategy of 88mph, as well as who receives the fees.</li>
<li><code>MoneyMarket</code>: A wrapper for interacting with yield-generating protocols, and stores all of the user funds. Requires a different one for each protocol.</li>
<li><code>InterestOracle</code>: An oracle for the interest rate of the underlying yield-generating protocol.</li>
<li><code>NFT</code>: Two non-fungible ERC721 tokens, used for representing ownership of deposits and bonds.</li>
</ul>
<p>Globally 88mph has the following contracts for handling things related to the MPH token:</p>
<ul>
<li><code>MPHToken</code>: The MPH ERC-20 token contract itself.</li>
<li><code>MPHMinter</code>: Responsible for minting &amp; taking back MPH tokens for depositors &amp; bond buyers.</li>
<li><code>Dumper</code>: Responsible for accumulating the protocol fees &amp; yield-farming rewards generated by 88mph pools and exchanging them for DAI.</li>
<li><code>Rewards</code>: The MPH rewards staking contract for distributing the protocol fees &amp; yield-farming rewards.</li>
</ul>
<h2 id="api-reference">API reference<a class="headerlink" href="#api-reference" title="Permanent link">#</a></h2>
<h3 id="dinterest">DInterest<a class="headerlink" href="#dinterest" title="Permanent link">#</a></h3>
<h4 id="state-changing-functions">State changing functions<a class="headerlink" href="#state-changing-functions" title="Permanent link">#</a></h4>
<h5 id="function-deposituint256-amount-uint256-maturationtimestamp-external"><code>function deposit(uint256 amount, uint256 maturationTimestamp) external</code><a class="headerlink" href="#function-deposituint256-amount-uint256-maturationtimestamp-external" title="Permanent link">#</a></h5>
<p>Creates a single deposit for the caller.</p>
<ul>
<li><code>amount</code>: The amount of <code>stablecoin</code> to deposit. The caller should have already approved the contract to spend this much <code>stablecoin</code> before calling this function. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</li>
<li><code>maturationTimestamp</code>: The Unix timestamp at and after which the deposit will be able to be withdrawn. In seconds.</li>
</ul>
<h5 id="function-withdrawuint256-depositid-uint256-fundingid-external"><code>function withdraw(uint256 depositID, uint256 fundingID) external</code><a class="headerlink" href="#function-withdrawuint256-depositid-uint256-fundingid-external" title="Permanent link">#</a></h5>
<p>Withdraws a single deposit for the caller. The caller must own the deposit NFT with ID <code>depositID</code>.</p>
<ul>
<li><code>depositID</code>: The index of the deposit to be withdrawn in the <code>deposits</code> array plus 1.</li>
<li><code>fundingID</code>: The index of the funding object that funded the deposit's debt in the <code>fundingList</code> array plus 1. It can be found using our <a href="https://thegraph.com/explorer/subgraph/bacon-labs/eighty-eight-mph">subgraph</a>.</li>
</ul>
<h6 id="important-note">Important note<a class="headerlink" href="#important-note" title="Permanent link">#</a></h6>
<p>Withdrawing may fail if the 88mph pool has failed to generate enough interest from the underlying money market to cover the deficit incurred by the original upfront interest payout, and no one has funded the difference by buying bonds. This is the main risk of depositing into 88mph.</p>
<h5 id="function-earlywithdrawuint256-depositid-uint256-fundingid-external"><code>function earlyWithdraw(uint256 depositID, uint256 fundingID) external</code><a class="headerlink" href="#function-earlywithdrawuint256-depositid-uint256-fundingid-external" title="Permanent link">#</a></h5>
<p>Withdraws a single deposit for the caller, before the maturation timestamp. The caller must own the deposit NFT with ID <code>depositID</code>.</p>
<ul>
<li><code>depositID</code>: The index of the deposit to be withdrawn in the <code>deposits</code> array plus 1.</li>
<li><code>fundingID</code>: The index of the funding object that funded the deposit's debt in the <code>fundingList</code> array plus 1. It can be found using our <a href="https://thegraph.com/explorer/subgraph/bacon-labs/eighty-eight-mph">subgraph</a>.</li>
</ul>
<h5 id="function-multideposituint256-calldata-amountlist-uint256-calldata-maturationtimestamplist-external"><code>function multiDeposit(uint256[] calldata amountList, uint256[] calldata maturationTimestampList) external</code><a class="headerlink" href="#function-multideposituint256-calldata-amountlist-uint256-calldata-maturationtimestamplist-external" title="Permanent link">#</a></h5>
<p>Deposits multiple deposits for the caller. The values at each index in each array will be combined to create a single deposit.</p>
<ul>
<li><code>amountList</code>: An array of the amounts of <code>stablecoin</code> to deposit. The caller should have already approved the contract to spend this much <code>stablecoin</code> before calling this function. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</li>
<li><code>maturationTimestampList</code>: An array of the Unix timestamps at and after which the deposits will be able to be withdrawn. In seconds.</li>
</ul>
<h6 id="input-size-limit">Input size limit<a class="headerlink" href="#input-size-limit" title="Permanent link">#</a></h6>
<p>The maximum recommended number of deposits is 20.</p>
<h5 id="function-multiwithdrawuint256-calldata-depositidlist-uint256-calldata-fundingidlist-external"><code>function multiWithdraw(uint256[] calldata depositIDList, uint256[] calldata fundingIDList) external</code><a class="headerlink" href="#function-multiwithdrawuint256-calldata-depositidlist-uint256-calldata-fundingidlist-external" title="Permanent link">#</a></h5>
<p>Withdraws multiple deposits for the caller. The caller must own the deposit NFTs with IDs in <code>depositIDList</code>.</p>
<ul>
<li><code>depositIDList</code>: The indices of the deposits to be withdrawn in the <code>deposits</code> array plus 1.</li>
<li><code>fundingIDList</code>:  The indices of the funding objects that funded the deposit's debt in the <code>fundingList</code> array plus 1. It can be found using our <a href="https://thegraph.com/explorer/subgraph/bacon-labs/eighty-eight-mph">subgraph</a>.</li>
</ul>
<h6 id="input-size-limit_1">Input size limit<a class="headerlink" href="#input-size-limit_1" title="Permanent link">#</a></h6>
<p>The maximum recommended number of deposits is 100.</p>
<h6 id="important-note_1">Important note<a class="headerlink" href="#important-note_1" title="Permanent link">#</a></h6>
<p>Withdrawing may fail if the 88mph pool has failed to generate enough interest from the underlying money market to cover the deficit incurred by the original upfront interest payout, and no one has funded the difference. This is the main risk of depositing into 88mph. If withdrawing actually fails, <code>earlyWithdraw()</code> may be called to get back the deposit minus the upfront interest and fee.</p>
<h5 id="function-multiearlywithdrawuint256-calldata-depositidlist-uint256-calldata-fundingidlist-external"><code>function multiEarlyWithdraw(uint256[] calldata depositIDList, uint256[] calldata fundingIDList) external</code><a class="headerlink" href="#function-multiearlywithdrawuint256-calldata-depositidlist-uint256-calldata-fundingidlist-external" title="Permanent link">#</a></h5>
<p>Withdraws multiple deposits for the caller, before the maturation timestamp. The caller must own the deposit NFTs with IDs in <code>depositIDList</code>.</p>
<ul>
<li><code>depositIDList</code>: The indices of the deposits to be withdrawn in the <code>deposits</code> array plus 1.</li>
<li><code>fundingIDList</code>:  The indices of the funding objects that funded the deposit's debt in the <code>fundingList</code> array plus 1. It can be found using our <a href="https://thegraph.com/explorer/subgraph/bacon-labs/eighty-eight-mph">subgraph</a>.</li>
</ul>
<h6 id="input-size-limit_2">Input size limit<a class="headerlink" href="#input-size-limit_2" title="Permanent link">#</a></h6>
<p>The maximum recommended number of deposits is 50.</p>
<h5 id="function-fundall-external"><code>function fundAll() external</code><a class="headerlink" href="#function-fundall-external" title="Permanent link">#</a></h5>
<p>Allows the caller to fund all of the existing deficit of the 88mph pool. In exchange, the caller receives a funding NFT, and the interest generated by the deposits the caller funded will be sent to the owner of the NFT whenever a deposit they funded is withdrawn.</p>
<p>Before calling this function, the caller must approve at least the deficit amount of <code>stablecoin</code> to the <code>DInterest</code> contract. This amount may be obtained using <a href="#function-surplus-external-view-returns-bool-isnegative-uint256-surplusamount"><code>surplus()</code></a>. To avoid the transaction being reverted, it is recommended to simply set the approval amount to <script type="math/tex">2^{256}-1</script>.</p>
<h5 id="function-fundmultipleuint256-todepositid-external"><code>function fundMultiple(uint256 toDepositID) external</code><a class="headerlink" href="#function-fundmultipleuint256-todepositid-external" title="Permanent link">#</a></h5>
<p>Allows the caller to fund the deficit of multiple deposits. In exchange, the caller receives a funding NFT, and the interest generated by the deposits the caller funded will be sent to the owner of the NFT whenever a deposit they funded is withdrawn.</p>
<p>Before calling this function, the caller must approve at least the deficit amount of <code>stablecoin</code> to the <code>DInterest</code> contract. This amount may be obtained using <a href="#function-surplusofdeposituint256-depositid-external-view-returns-bool-isnegative-uint256-surplusamount"><code>surplusOfDeposit()</code></a>. To avoid the transaction being reverted, it is recommended to simply set the approval amount to <script type="math/tex">2^{256}-1</script>.</p>
<ul>
<li><code>toDepositID</code>: Deposits with ID from (not including) <code>lastFundedDepositID</code> to (including) <code>toDepositID</code> will be funded.</li>
</ul>
<h4 id="read-only-functions">Read only functions<a class="headerlink" href="#read-only-functions" title="Permanent link">#</a></h4>
<h5 id="function-getdeposituint256-depositid-external-view-returns-uint256-amount-uint256-maturationtimestamp-uint256-initialdeficit-uint256-initialmoneymarketincomeindex-bool-active"><code>function getDeposit(uint256 depositID) external view returns (uint256 amount, uint256 maturationTimestamp, uint256 initialDeficit, uint256 initialMoneyMarketIncomeIndex, bool active)</code><a class="headerlink" href="#function-getdeposituint256-depositid-external-view-returns-uint256-amount-uint256-maturationtimestamp-uint256-initialdeficit-uint256-initialmoneymarketincomeindex-bool-active" title="Permanent link">#</a></h5>
<p>Returns info about a user deposit. The owner of the deposit is whichever Ethereum account that owns the ERC721 deposit token with id <code>depositID</code>.</p>
<h6 id="inputs">Inputs<a class="headerlink" href="#inputs" title="Permanent link">#</a></h6>
<ul>
<li><code>depositID</code>: The index of the deposit in the <code>deposits</code> array.</li>
</ul>
<h6 id="returns">Returns<a class="headerlink" href="#returns" title="Permanent link">#</a></h6>
<ul>
<li><code>amount</code>: The amount of the deposit, in stablecoins. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</li>
<li><code>maturationTimestamp</code>: The Unix timestamp at and after which the deposit will be able to be withdrawn. In seconds.</li>
<li><code>interestOwed</code>: The initial debt caused by the deposit.</li>
<li><code>initialMoneyMarketIncomeIndex</code>: The value returned by <a href="#function-incomeIndex-external-returns-uint256"><code>moneyMarket.incomeIndex()</code></a> at the time of deposit.</li>
<li><code>active</code>: <code>true</code> if the deposit hasn't been withdrawn, <code>false</code> otherwise.</li>
<li><code>finalSurplusIsNegative</code>: <code>true</code> if at the time of withdrawal the deposit had a negative surplus, <code>false</code> otherwise.</li>
<li><code>finalSurplusAmount</code>: The amount of surplus/debt of the deposit at the time of withdrawal.</li>
<li><code>mintMPHAmount</code>: The amount of MPH tokens minted to the user at the time of deposit.</li>
</ul>
<h5 id="function-getfundinguint256-fundingid-external-view-returns-uint256-fromdepositid-uint256-todepositid-uint256-recordedfundeddepositamount-uint256-recordedmoneymarketincomeindex"><code>function getFunding(uint256 fundingID) external view returns (uint256 fromDepositID, uint256 toDepositID, uint256 recordedFundedDepositAmount, uint256 recordedMoneyMarketIncomeIndex)</code><a class="headerlink" href="#function-getfundinguint256-fundingid-external-view-returns-uint256-fromdepositid-uint256-todepositid-uint256-recordedfundeddepositamount-uint256-recordedmoneymarketincomeindex" title="Permanent link">#</a></h5>
<p>Returns info about a funding. The owner of the funding (and the account who will receive the interests) is whichever Ethereum account that owns the ERC721 funding token with id <code>fundingID</code>.</p>
<h6 id="inputs_1">Inputs<a class="headerlink" href="#inputs_1" title="Permanent link">#</a></h6>
<ul>
<li><code>fundingID</code>: The index of the funding in the <code>fundingList</code> array.</li>
</ul>
<h6 id="returns_1">Returns<a class="headerlink" href="#returns_1" title="Permanent link">#</a></h6>
<ul>
<li><code>fromDepositID</code>: Deposits with ID from (not including) <code>fromDepositID</code> to (including) <code>toDepositID</code> have their deficits funded by this funding instance.</li>
<li><code>toDepositID</code>: Deposits with ID from (not including) <code>fromDepositID</code> to (including) <code>toDepositID</code> have their deficits funded by this funding instance.</li>
<li><code>recordedFundedDepositAmount</code>: The current total deposit amount that is generating interest for the owner of this funding instance, in stablecoins. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</li>
<li><code>recordedMoneyMarketIncomeIndex</code>: The value returned by <a href="#function-incomeIndex-external-returns-uint256"><code>moneyMarket.incomeIndex()</code></a> at the time of the latest withdrawal of a deposit funded by this funding instance. If no funded deposit has been withdrawn yet, this value is equal to the monet market incomeIndex at the time of the funding instance's creation.</li>
</ul>
<h5 id="function-mindepositperiod-external-view-returns-uint256"><code>function MinDepositPeriod() external view returns (uint256)</code><a class="headerlink" href="#function-mindepositperiod-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the minimum deposit period, in seconds.</p>
<h5 id="function-maxdepositperiod-external-view-returns-uint256"><code>function MaxDepositPeriod() external view returns (uint256)</code><a class="headerlink" href="#function-maxdepositperiod-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the maximum deposit period, in seconds.</p>
<h5 id="function-mindepositamount-external-view-returns-uint256"><code>function MinDepositAmount() external view returns (uint256)</code><a class="headerlink" href="#function-mindepositamount-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the minimum deposit amount for a single deposit in <code>stablecoin</code>. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</p>
<h5 id="function-maxdepositamount-external-view-returns-uint256"><code>function MaxDepositAmount() external view returns (uint256)</code><a class="headerlink" href="#function-maxdepositamount-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the maximum deposit amount for a single deposit in <code>stablecoin</code>. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</p>
<h5 id="function-totaldeposit-external-view-returns-uint256"><code>function totalDeposit() external view returns (uint256)</code><a class="headerlink" href="#function-totaldeposit-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the total deposited amount of <code>stablecoin</code>. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</p>
<h5 id="function-moneymarket-external-view-returns-address"><code>function moneyMarket() external view returns (address)</code><a class="headerlink" href="#function-moneymarket-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address of <code>MoneyMarket</code>.</p>
<h5 id="function-stablecoin-external-view-returns-address"><code>function stablecoin() external view returns (address)</code><a class="headerlink" href="#function-stablecoin-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address of the stablecoin used.</p>
<h5 id="function-feemodel-external-view-returns-address"><code>function feeModel() external view returns (address)</code><a class="headerlink" href="#function-feemodel-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address of <code>FeeModel</code>.</p>
<h5 id="function-interestmodel-external-view-returns-address"><code>function interestModel() external view returns (address)</code><a class="headerlink" href="#function-interestmodel-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address of <code>InterestModel</code>.</p>
<h5 id="function-interestoracle-external-view-returns-address"><code>function interestOracle() external view returns (address)</code><a class="headerlink" href="#function-interestoracle-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address of <code>InterestOracle</code>.</p>
<h5 id="function-depositnft-external-view-returns-address"><code>function depositNFT() external view returns (address)</code><a class="headerlink" href="#function-depositnft-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address of the ERC721 deposit token.</p>
<h5 id="function-fundingnft-external-view-returns-address"><code>function fundingNFT() external view returns (address)</code><a class="headerlink" href="#function-fundingnft-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address of ERC721 funding token.</p>
<h5 id="function-calculateinterestamountuint256-depositamount-uint256-depositperiodinseconds-external-view-returns-uint256-interestamount"><code>function calculateInterestAmount(uint256 depositAmount, uint256 depositPeriodInSeconds) external view returns (uint256 interestAmount)</code><a class="headerlink" href="#function-calculateinterestamountuint256-depositamount-uint256-depositperiodinseconds-external-view-returns-uint256-interestamount" title="Permanent link">#</a></h5>
<p>Returns the interest amount given the deposit amount and period.</p>
<h6 id="inputs_2">Inputs<a class="headerlink" href="#inputs_2" title="Permanent link">#</a></h6>
<ul>
<li><code>depositAmount</code>: The amount of the deposit in <code>stablecoin</code>. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</li>
<li><code>depositPeriodInSeconds</code>: The length of the deposit's deposit period, in seconds.</li>
</ul>
<h5 id="function-surplus-external-view-returns-bool-isnegative-uint256-surplusamount"><code>function surplus() external view returns (bool isNegative, uint256 surplusAmount)</code><a class="headerlink" href="#function-surplus-external-view-returns-bool-isnegative-uint256-surplusamount" title="Permanent link">#</a></h5>
<p>Returns the surplus value of the pool over the owed deposits.</p>
<h6 id="returns_2">Returns<a class="headerlink" href="#returns_2" title="Permanent link">#</a></h6>
<ul>
<li><code>isNegative</code>: Whether the surplus is negative. A negative surplus means there's a deficit.</li>
<li><code>surplusAmount</code>: Amount of the pool's surplus, in stablecoins. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</li>
</ul>
<h5 id="function-surplusofdeposituint256-depositid-external-view-returns-bool-isnegative-uint256-surplusamount"><code>function surplusOfDeposit(uint256 depositID) external view returns (bool isNegative, uint256 surplusAmount)</code><a class="headerlink" href="#function-surplusofdeposituint256-depositid-external-view-returns-bool-isnegative-uint256-surplusamount" title="Permanent link">#</a></h5>
<p>Returns the surplus value of a particular deposit. Does not include funding.</p>
<h6 id="inputs_3">Inputs<a class="headerlink" href="#inputs_3" title="Permanent link">#</a></h6>
<ul>
<li><code>depositID</code>: The index of the deposit to be withdrawn in the <code>deposits</code> array plus 1.</li>
</ul>
<h6 id="returns_3">Returns<a class="headerlink" href="#returns_3" title="Permanent link">#</a></h6>
<ul>
<li><code>isNegative</code>: Whether the surplus is negative. A negative surplus means there's a deficit.</li>
<li><code>surplusAmount</code>: Amount of the pool's surplus, in stablecoins. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</li>
</ul>
<h5 id="function-depositslength-external-view-returns-uint256"><code>function depositsLength() external view returns (uint256)</code><a class="headerlink" href="#function-depositslength-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the length of the <code>deposits</code> array.</p>
<h5 id="function-fundinglistlength-external-view-returns-address"><code>function fundingListLength() external view returns (address)</code><a class="headerlink" href="#function-fundinglistlength-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the length of the <code>fundingList</code> array.</p>
<h5 id="function-depositisfundeduint256-depositid-external-view-returns-bool"><code>function depositIsFunded(uint256 depositID) external view returns (bool)</code><a class="headerlink" href="#function-depositisfundeduint256-depositid-external-view-returns-bool" title="Permanent link">#</a></h5>
<h6 id="inputs_4">Inputs<a class="headerlink" href="#inputs_4" title="Permanent link">#</a></h6>
<ul>
<li><code>depositID</code>: The index of the deposit to be withdrawn in the <code>deposits</code> array plus 1.</li>
</ul>
<h6 id="returns_4">Returns<a class="headerlink" href="#returns_4" title="Permanent link">#</a></h6>
<p>Returns whether or not the deposit's deficit has been funded.</p>
<h5 id="function-latestfundeddepositid-external-view-returns-uint256"><code>function latestFundedDepositID() external view returns (uint256)</code><a class="headerlink" href="#function-latestfundeddepositid-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the maximum ID among funded deposits. It can be assumed that all deposits with ID less than or equal to this value have been funded.</p>
<h5 id="function-unfundeduserdepositamount-external-view-returns-uint256"><code>function unfundedUserDepositAmount() external view returns (uint256)</code><a class="headerlink" href="#function-unfundeduserdepositamount-external-view-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the deposited <code>stablecoin</code> amount whose deficit hasn't been funded. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</p>
<h3 id="feemodel">FeeModel<a class="headerlink" href="#feemodel" title="Permanent link">#</a></h3>
<h4 id="read-only-functions_1">Read only functions<a class="headerlink" href="#read-only-functions_1" title="Permanent link">#</a></h4>
<h5 id="function-getfeeuint256-_txamount-external-pure-returns-uint256-_feeamount"><code>function getFee(uint256 _txAmount) external pure returns (uint256 _feeAmount)</code><a class="headerlink" href="#function-getfeeuint256-_txamount-external-pure-returns-uint256-_feeamount" title="Permanent link">#</a></h5>
<p>Used for determining how much fee to charge from a transaction.</p>
<h6 id="inputs_5">Inputs<a class="headerlink" href="#inputs_5" title="Permanent link">#</a></h6>
<ul>
<li><code>_txAmount</code>: The amount of the transaction from which a fee will be taken.</li>
</ul>
<h6 id="returns_5">Returns<a class="headerlink" href="#returns_5" title="Permanent link">#</a></h6>
<ul>
<li><code>_feeAmount</code>: The amount of the fee that will be taken from the transaction.</li>
</ul>
<h5 id="function-beneficiary-external-view-returns-address"><code>function beneficiary() external view returns (address)</code><a class="headerlink" href="#function-beneficiary-external-view-returns-address" title="Permanent link">#</a></h5>
<p>Returns the address who will receive the fees.</p>
<h3 id="moneymarket">MoneyMarket<a class="headerlink" href="#moneymarket" title="Permanent link">#</a></h3>
<h4 id="state-changing-functions_1">State changing functions<a class="headerlink" href="#state-changing-functions_1" title="Permanent link">#</a></h4>
<h5 id="function-deposituint256-amount-external"><code>function deposit(uint256 amount) external</code><a class="headerlink" href="#function-deposituint256-amount-external" title="Permanent link">#</a></h5>
<p>Lends <code>amount</code> stablecoins to the underlying money market protocol.</p>
<h6 id="inputs_6">Inputs<a class="headerlink" href="#inputs_6" title="Permanent link">#</a></h6>
<ul>
<li><code>amount</code>: The amount of stablecoins to be deposited.</li>
</ul>
<h5 id="function-withdrawuint256-amountinunderlying-external"><code>function withdraw(uint256 amountInUnderlying) external</code><a class="headerlink" href="#function-withdrawuint256-amountinunderlying-external" title="Permanent link">#</a></h5>
<p>Withdraws <code>amountInUnderlying</code> stablecoins from the underlying money market protocol.</p>
<h6 id="inputs_7">Inputs<a class="headerlink" href="#inputs_7" title="Permanent link">#</a></h6>
<ul>
<li><code>amountInUnderlying</code>: The amount of stablecoins to be withdrawn.</li>
</ul>
<h4 id="read-only-functions_2">Read only functions<a class="headerlink" href="#read-only-functions_2" title="Permanent link">#</a></h4>
<h5 id="function-totalvalue-external-returns-uint256"><code>function totalValue() external returns (uint256)</code><a class="headerlink" href="#function-totalvalue-external-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns the total value locked in the money market, in terms of the underlying stablecoin. Scaled by <script type="math/tex">10^{stablecoinDecimals}</script>.</p>
<h5 id="function-incomeindex-external-returns-uint256"><code>function incomeIndex() external returns (uint256)</code><a class="headerlink" href="#function-incomeindex-external-returns-uint256" title="Permanent link">#</a></h5>
<p>Returns an index that can be used to compute the interest generated by the money market over a period of time. Specifically, <script type="math/tex">interestOverPeriod = depositValueAtBeginningOfPeriod \times \frac{incomeIndexAtEndOfPeriod}{incomeIndexAtBeginningOfPeriod}</script>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../addresses/" class="btn btn-neutral" title="Smart contract addresses"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/88mphapp/docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../addresses/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
